/**
* Please Wait
* Display a nice loading screen while your app loads

* @author Pathgather <tech@pathgather.com>
* @copyright Pathgather 2014
* @license MIT <http://opensource.org/licenses/mit-license.php>
* @link https://github.com/Pathgather/please-wait
* @module pleaseWait
* @version 0.0.1
*/
!function(a,b){"object"==typeof exports?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a)}(this,function(a){var b,c,d,e,f,g,h,i,j;if(e=document.createElement("fakeelement"),c=!1,h="animationend",d="Webkit Moz O ms".split(" "),null!=e.style.animationName&&(c=!0),!c)for(i=0,j=d.length;j>i;i++)if(f=d[i],null!=e.style[""+f+"AnimationName"]){switch(f){case"Webkit":h="webkitAnimationEnd";break;case"Moz":h="animationend";break;case"O":h="oanimationend";break;case"ms":h="MSAnimationEnd"}c=!0;break}return b=function(){function a(a){var b,d,e,f;b=this.constructor._defaultOptions,this.options={};for(d in b)f=b[d],this.options[d]=null!=a[d]?a[d]:f;this._loadingElem=document.createElement("div"),this._loadingHtmlToDisplay=[],this._loadingElem.className="pg-loading-screen",null!=this.options.backgroundColor&&(this._loadingElem.style.backgroundColor=this.options.backgroundColor),this._loadingElem.innerHTML=this.options.template,this._loadingHtmlElem=this._loadingElem.getElementsByClassName("pg-loading-html")[0],null!=this._loadingHtmlElem&&(this._loadingHtmlElem.innerHTML=this.options.loadingHtml),this._readyToShowLoadingHtml=!1,this._logoElem=this._loadingElem.getElementsByClassName("pg-loading-logo")[0],null!=this._logoElem&&(this._logoElem.src=this.options.logo),document.body.className+=" pg-loading",document.body.appendChild(this._loadingElem),this._loadingElem.className+=" pg-loading",e=function(a){return function(){return a._readyToShowLoadingHtml=!0,c&&a._loadingHtmlElem.removeEventListener(h,e),a._loadingHtmlToDisplay.length>0?a._changeLoadingHtml():void 0}}(this),null!=this._loadingHtmlElem&&(c?this._loadingHtmlElem.addEventListener(h,e):e(),this._loadingHtmlListener=function(a){return function(){return a._readyToShowLoadingHtml=!0,a._loadingHtmlElem.className=a._loadingHtmlElem.className.replace(" pg-loading ",""),c&&a._loadingHtmlElem.removeEventListener(h,a._loadingHtmlListener),a._loadingHtmlToDisplay.length>0?a._changeLoadingHtml():void 0}}(this),this._removingHtmlListener=function(a){return function(){return a._loadingHtmlElem.innerHTML=a._loadingHtmlToDisplay.shift(),a._loadingHtmlElem.className=a._loadingHtmlElem.className.replace(" pg-removing "," pg-loading "),c?(a._loadingHtmlElem.removeEventListener(h,a._removingHtmlListener),a._loadingHtmlElem.addEventListener(h,a._loadingHtmlListener)):a._loadingHtmlListener()}}(this))}return a._defaultOptions={backgroundColor:null,logo:null,loadingHtml:null,template:"<div class='pg-loading-inner'>\n  <div class='pg-loading-center-outer'>\n    <div class='pg-loading-center-middle'>\n      <h1 class='pg-loading-logo-header'>\n        <img class='pg-loading-logo'></img>\n      </h1>\n      <div class='pg-loading-html'>\n      </div>\n    </div>\n  </div>\n</div>"},a.prototype.finish=function(){var a;if(null!=this._loadingElem)return a=function(b){return function(){return document.body.removeChild(b._loadingElem),document.body.className=document.body.className.replace("pg-loading","pg-loaded"),c&&b._loadingElem.removeEventListener(h,a),b._loadingElem=null}}(this),c?(this._loadingElem.className+=" pg-loaded",this._loadingElem.addEventListener(h,a)):a()},a.prototype.updateOption=function(a,b){switch(a){case"backgroundColor":return this._loadingElem.style.backgroundColor=b;case"logo":return this._logoElem.src=b;case"loadingHtml":return this.updateLoadingHtml(b);default:throw new Error("Unknown option '"+a+"'")}},a.prototype.updateOptions=function(a){var b,c,d;null==a&&(a={}),d=[];for(b in a)c=a[b],d.push(this.updateOption(b,c));return d},a.prototype.updateLoadingHtml=function(a,b){if(null==b&&(b=!1),null==this._loadingHtmlElem)throw new Error("The loading template does not have an element of class 'pg-loading-html'");return b?(this._loadingHtmlToDisplay=[a],this._readyToShowLoadingHtml=!0):this._loadingHtmlToDisplay.push(a),this._readyToShowLoadingHtml?this._changeLoadingHtml():void 0},a.prototype._changeLoadingHtml=function(){return this._readyToShowLoadingHtml=!1,this._loadingHtmlElem.removeEventListener(h,this._loadingHtmlListener),this._loadingHtmlElem.removeEventListener(h,this._removingHtmlListener),this._loadingHtmlElem.className=this._loadingHtmlElem.className.replace(" pg-loading ","").replace(" pg-removing ",""),null!=h?(this._loadingHtmlElem.className+=" pg-removing ",this._loadingHtmlElem.addEventListener(h,this._removingHtmlListener)):this._removingHtmlListener()},a}(),g=function(a){return null==a&&(a={}),new b(a)},a.pleaseWait=g,g});